# 2번째 과제 풀이

## [9663번: N-Queen (acmicpc.net)](https://www.acmicpc.net/problem/9663)

- 이 문제는 n x n 크기의 체스판 위에 n개의 퀸을 서로 공격하지 않게 놓을 수 있는 방법의 수를 구하는 것이다.
- 퀸이 서로를 공격하지 않으려면, 퀸들은 서로 같은 행, 같은 열, 같은 대각선 위에 존재해서는 안된다.
- 퀸들은 서로 다른 행에 존재해야 하므로 각 행에서 퀸 하나를 놓는 방식으로 상태 공간 트리를 만들 수 있다. i 행에서 퀸을 놓기로 선택한 열은 queen_cols[i]에 저장한다.
- 모든 경우의 수는 dfs를 이용해서 탐색한다.
- 그런데 상태 공간 트리에서 어느 지점에 이르면 해답으로 이어지지 않는 분기에 들어갈 수 있다. 이 분기를 끝까지 탐색하는 것은 비효율적이기 때문에 **백트래킹**을 이용한다. 백트래킹을 이용하면 해답으로 이어지지 않는 노드의 자식을 탐색하지 않아도 된다.
- 각 행에서 퀸이 놓일 열을 선택한 다음에, 이 경우가 해답으로 이어질 수 있는지 검사한다. 해답으로 이어지려면 지금까지 놓인 퀸들과 이번에 놓은 퀸이 서로 같은 열, 같은 대각선 위에 존재하지 않아야 한다. queen_cols에 저장된 값을 이용해서 이 조건을 만족하는지 확인한다.
- 만약 어떤 노드가 해답으로 이어질 수 있다면 상태 공간 트리에서 그 자식들을 탐색한다.
- n개의 퀸을 모두 배치할 수 있었다면, 서로 공격하지 않는 경우를 찾은 것이다. 그러므로 전체 경우의 수인 cnt에 1을 더해야 한다.

- 시간복잡도는  $O( (N-1)! )$으로 추정된다.
- 백트래킹을 이용했을 때, 퀸들이 같은 행과 같은 열에 놓일 경우는 없다는 점만 고려해보자.
- 이전에 퀸을 놓고 나면, 퀸이 놓인 행과 열을 제외한 N-1 x N-1 체스판에 N-1개의 퀸을 놓아야 한다고 생각할 수 있다.
- 퀸을 놓는 시간을 c 라고 하고, N에 대해서 문제를 푸는데 걸리는 시간을 T라고 하자.
- $T(N) = (N-1) \times (T(N - 1) + c)        (N ≥ 1)$ 또는 $0 (N=0)$
- $T(N-1) = (N-2) \times( T(N-2) + c)$ 이므로 다음과 같다.
    
    $T(N) = (N - 1) \times (T(N - 1) + c)$ 
    
    $= (N - 1) \times ( (N-2) \times (T(N-2) + c)) + (N - 1) \times c$
    
    $= (N - 1)(N-2) \times T(N-2) + ((N - 1)(N-2) + (N - 1)) \times c$
    
    $= …$
    
    $= (N-1)! \times T(1) + (N-1)! \times c + [(N-1) \times … \times 3 +  (N-1) \times … \times 4 + … + (N-1)(N-2) + ( N-1)] \times c$
    
    $= (N-1)! \times 2c + [(N-1) \times … \times 3 + (N-1) \times … \times 4 + … + ( N-1)] \times c$
    
- 따라서 $T(N) = O( (N-1)! )$이다.
- 그런데 같은 대각선 상에 놓여서 제외되는 경우는 고려하지 않았으므로 실제 알고리즘은 T보다는 더 빠를 것이다.

## [15651번: N과 M (3) (acmicpc.net)](https://www.acmicpc.net/problem/15651)

- 이 문제는 1~N 사이의 자연수 중에서 중복을 허용해서 M개의 수를 골라서 만들 수 있는 수열을 구하는 것이다. 이때 수열은 사전 순으로 증가하도록 출력해야 한다.
- 중복을 허용하므로 길이가 M인 수열에서 각 자리에는 1 ~ N 중 어떤 수라도 위치할 수 있다.
- 모든 경우의 수를 찾기 위해서 dfs를 이용한다.
- 수열은 seq[]에 저장한다. find_sequence 함수에서 각 자리에 올 수를 1~N 중에서 선택한다. 출력 결과는 사전 순으로 증가해야 하므로 수열의 앞자리부터 선택해나가야 한다.
- M개의 수를 선택하면 수열을 완성한 것이다. 그러므로 지금까지 선택한 M개의 수를 출력한다.

- 시간 복잡도는  $O( N^{M-1 } )$으로 추정된다.
- 수열의 각 자리에 올 수를 선택해서 find_sequence에 대입하는 것을 단위 연산으로 삼았다. c는 각 자리에 올 수를 선택하는데 걸리는 시간이다.
- 입력 N, M에 대해서 문제를 푸는데 걸리는 시간을 T라고 하자.
- $T(N, M) = N \times T(N, M - 1) + c    (M ≥ 1)$ 또는  $0 (M=0)$
- $T(N, M - 1) = N \times T(N, M - 2) + c$   이므로 다음과 같다.
    
    $T(N, M) = N \times ( N \times T(N, M - 2) + c) + c$
    
    $= N^2 \times T (N, M -2) + (N + 1) \times c$
    
    $= …$  
    
    $= N^{M-1} \times T(N, 1) + (N^{M-1} + N^{M-2} + … + N + 1) \times c$
    
    $= N^{M-1} \times 2c + (N^{M-2} + … + 1) \times c$
    
- 따라서 $T(N, M) = O( N^{M-1} )$ 이다.